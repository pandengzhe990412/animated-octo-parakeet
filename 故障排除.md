# 🔧 故障排除指南

## 你的问题：扩展打不开

### 可能的原因和解决方案

---

## 原因 1：Chrome 版本过低

**侧边栏 API (Side Panel) 需要 Chrome 114+**

**检查方法：**
1. 在 Chrome 地址栏输入：`chrome://version/`
2. 查看"版本"号
3. 需要大于或等于 114

**解决方案：**
如果版本低于 114，需要更新 Chrome：
1. 点击 Chrome 右上角三个点
2. 帮助 → 关于 Google Chrome
3. 等待自动更新

---

## 原因 2：选择了错误的文件夹

**常见错误：选择了 `d:\gongzhonghao` 而不是 `d:\gongzhonghao\build\chrome-mv3-dev`**

**正确步骤：**
1. 打开 `chrome://extensions/`
2. 开启"开发者模式"
3. 点击"加载已解压的扩展程序"
4. **重要**：在文件夹选择器中，双击进入这些文件夹：
   ```
   d: → gongzhonghao → build → chrome-mv3-dev
   ```
5. 选中 `chrome-mv3-dev` 文件夹
6. 点击"选择文件夹"

**确认方法：**
加载成功后，扩展卡片应显示：
- 名称：飞书文档转公众号助手
- 版本：0.1.0
- ID：一串字符

---

## 原因 3：扩展加载成功但点击图标没反应

**这是最常见的情况！**

**检查方法：**
1. 在 `chrome://extensions/` 页面
2. 找到"飞书文档转公众号助手"
3. 点击"详细信息"
4. 查看权限列表，应该包括：
   - ✓ 存储数据
   - ✓ 活动标签页
   - ✓ 剪贴板写入
   - ✓ **侧边栏** ← 这个很重要！

**如果没有"侧边栏"权限：**
1. 点击"清除浏览数据"
2. 点击"重新加载"按钮（右下角 🔄）
3. 完全关闭 Chrome
4. 重新打开 Chrome
5. 重新加载扩展

---

## 原因 4：需要在网页上才能使用

**侧边栏扩展只能在网页上打开，不能在空白页或扩展页面打开**

**正确使用方法：**
1. 打开任意网页（例如百度、飞书）
2. 点击扩展图标
3. 侧边栏应该从右侧滑出

**如果还是没反应：**
1. 打开飞书文档页面
2. 点击扩展图标
3. 在浏览器右上角应该能看到侧边栏按钮

---

## 快速测试步骤

### 1. 确认扩展已加载
```
打开：chrome://extensions/
查找："飞书文档转公众号助手"
状态：应该是"已启用"（蓝色开关）
```

### 2. 确认权限
```
点击扩展卡片 → 详细信息
检查权限列表，应包含：
- 存储
- 活动标签页
- 剪贴板写入
- 侧边栏
```

### 3. 测试侧边栏
```
1. 打开：https://feishu.cn
2. 点击扩展图标
3. 应该看到侧边栏从右侧滑出
```

---

## 如果还是不行

请提供以下信息：

1. **Chrome 版本**
   ```
   chrome://version/
   版本：___
   ```

2. **扩展加载状态**
   ```
   在 chrome://extensions/ 页面：
   - [ ] 能看到扩展
   - [ ] 扩展已启用
   - [ ] 有错误提示（如有，请截图）
   ```

3. **点击图标后的反应**
   ```
   - [ ] 完全没反应
   - [ ] 出现错误提示
   - [ ] 其他（请描述）
   ```

4. **浏览器控制台错误**
   ```
   按 F12 打开控制台
   切换到 Console 标签
   看是否有红色错误信息
   ```

---

## 手动打开侧边栏的方法

如果点击图标没反应，可以尝试手动打开：

1. 确保在网页上（不是 chrome:// 页面）
2. 点击 Chrome 工具栏的扩展图标（拼图图标）
3. 找到"飞书文档转公众号助手"
4. 点击右侧的"..."按钮
5. 选择"在侧边栏中打开"

---

## 文件位置确认

构建输出目录：
```
D:\gongzhonghao\build\chrome-mv3-dev\
```

这个目录应该包含：
```
manifest.json
sidepanel.html
sidepanel.*.js
content.*.js
icon*.png
```

---

## 重新构建扩展

如果需要重新构建：
```bash
cd D:\gongzhonghao
pnpm build
```

然后在 Chrome 中：
```
chrome://extensions/ → 点击扩展的 🔄 按钮
```

---

更新时间：2026-02-06
